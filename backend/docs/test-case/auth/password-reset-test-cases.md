# 비밀번호 재설정 테스트 케이스

**작성일**: 2026-01-23
**버전**: 1.0
**관련 스펙**: [auth-spec.md](../../../../docs/feature/auth/auth-spec.md)
**우선순위**: P2

---

## 1. 개요

비밀번호 재설정 기능에 대한 테스트 케이스입니다. 비밀번호를 잊은 사용자가 이메일을 통해 비밀번호를 재설정하는 과정을 검증합니다.

---

## 2. 테스트 케이스

### 2.1 재설정 링크 발송

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PWD-001 | 유효한 학번으로 재설정 링크 발송 | 등록된 사용자 계정 존재 | 비밀번호 재설정 요청 시 학번 입력 | 등록된 이메일로 재설정 링크 발송 | ✅ |
| PWD-002 | 존재하지 않는 학번으로 요청 | - | 미등록 학번으로 비밀번호 재설정 요청 | 보안을 위해 동일한 성공 메시지 표시 (링크 발송 안함) | ✅ |
| PWD-003 | 재설정 링크 30분 유효 | 재설정 링크 발송 | 링크 만료 시간 확인 | 30분 유효기간 설정 | ✅ |
| PWD-004 | 재설정 요청 시 이메일 즉시 발송 | 등록된 사용자 | 비밀번호 재설정 요청 | 30초 이내 이메일 수신 | ✅ |

### 2.2 비밀번호 재설정 성공

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PWD-010 | 30분 이내 링크로 비밀번호 변경 성공 | 재설정 링크 수신 | 30분 이내 링크 클릭, 새 비밀번호 설정 | 비밀번호 변경 성공, 모든 기존 토큰 무효화 | ✅ |
| PWD-011 | 새 비밀번호로 로그인 성공 | 비밀번호 재설정 완료 | 새 비밀번호로 로그인 시도 | 로그인 성공 | ✅ |
| PWD-012 | 이전 비밀번호로 로그인 실패 | 비밀번호 재설정 완료 | 이전 비밀번호로 로그인 시도 | 로그인 실패 | ✅ |
| PWD-013 | 비밀번호 재설정 시 모든 세션 종료 | 여러 기기에서 로그인 중 | 비밀번호 재설정 완료 | 모든 기존 토큰 무효화, 모든 기기 로그아웃 | ✅ |

### 2.3 비밀번호 재설정 실패

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PWD-020 | 30분 경과 후 링크 만료 | 재설정 링크 발송 후 30분 경과 | 만료된 링크 클릭 | "링크가 만료되었습니다" 메시지 표시 | ✅ |
| PWD-021 | 이미 사용된 링크로 재시도 | 링크로 비밀번호 변경 완료 | 동일 링크로 다시 접속 | "이미 사용된 링크입니다" 또는 "링크가 만료되었습니다" 메시지 표시 | ✅ |
| PWD-022 | 변조된 링크로 접속 | - | 변조된 재설정 링크로 접속 | "유효하지 않은 링크입니다" 메시지 표시 | ✅ |

### 2.4 새 비밀번호 검증

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PWD-030 | 유효한 형식의 새 비밀번호 | 재설정 링크로 접속 | 영문 대/소문자+숫자+특수문자, 8자 이상 입력 | 비밀번호 변경 성공 | ✅ |
| PWD-031 | 8자 미만 새 비밀번호 | 재설정 링크로 접속 | 7자 비밀번호 입력 | 비밀번호 형식 오류 메시지 표시 | ✅ |
| PWD-032 | 대문자 미포함 새 비밀번호 | 재설정 링크로 접속 | 대문자 없는 비밀번호 입력 | 비밀번호 형식 오류 메시지 표시 | ✅ |
| PWD-033 | 소문자 미포함 새 비밀번호 | 재설정 링크로 접속 | 소문자 없는 비밀번호 입력 | 비밀번호 형식 오류 메시지 표시 | ✅ |
| PWD-034 | 숫자 미포함 새 비밀번호 | 재설정 링크로 접속 | 숫자 없는 비밀번호 입력 | 비밀번호 형식 오류 메시지 표시 | ✅ |
| PWD-035 | 특수문자 미포함 새 비밀번호 | 재설정 링크로 접속 | 특수문자 없는 비밀번호 입력 | 비밀번호 형식 오류 메시지 표시 | ✅ |

---

## 3. 관련 Functional Requirements

| ID | 요구사항 | 관련 테스트 케이스 |
|----|---------|------------------|
| FR-003 | 비밀번호 복잡도 검증 | PWD-030 ~ PWD-035 |
| FR-017 | 학번 입력 시 이메일로 재설정 링크 발송 | PWD-001, PWD-002, PWD-004 |
| FR-018 | 재설정 링크 30분 유효 | PWD-003, PWD-020 |
| FR-019 | 재설정 완료 시 모든 기존 토큰 무효화 | PWD-010, PWD-013 |
| FR-031 | BCrypt 해시 저장 | PWD-010 (새 비밀번호 저장 시) |

---

## 4. 예상 테스트 클래스 구조

```java
@Nested
@DisplayName("비밀번호 재설정 테스트")
class PasswordResetTest {

    @Nested
    @DisplayName("재설정 링크 발송")
    class ResetLinkSendTest {
        // PWD-001 ~ PWD-004
    }

    @Nested
    @DisplayName("비밀번호 재설정 성공")
    class ResetSuccessTest {
        // PWD-010 ~ PWD-013
    }

    @Nested
    @DisplayName("비밀번호 재설정 실패")
    class ResetFailureTest {
        // PWD-020 ~ PWD-022
    }

    @Nested
    @DisplayName("새 비밀번호 검증")
    class NewPasswordValidationTest {
        // PWD-030 ~ PWD-035
    }
}
```

---

## 5. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-23 | - | 최초 작성 |
