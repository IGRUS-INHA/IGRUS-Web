# 댓글(Comment) 테스트 케이스

**작성일**: 2026-01-26
**버전**: 1.0
**관련 스펙**: [comment-spec.md](../../../../../docs/feature/community/comment-spec.md)
**우선순위**: P1

---

## 1. 개요

댓글 기능에 대한 테스트 케이스입니다. 댓글 작성, 대댓글, 조회, 삭제 및 익명 댓글, 좋아요, 신고, 멘션 기능을 검증합니다.

---

## 2. 테스트 케이스

### 2.1 댓글 작성

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-001 | 일반 댓글 작성 | 정회원으로 로그인, 게시글 존재 | 댓글 내용 입력 후 등록 | 댓글 추가 및 목록에 표시 | ⬜ |
| CMT-002 | 익명 댓글 작성 (자유게시판) | 정회원으로 로그인, 자유게시판 게시글 | 익명 옵션 선택 후 댓글 작성 | 댓글 작성자 "익명"으로 표시 | ⬜ |
| CMT-003 | 익명 옵션 없음 (정보공유) | 정회원으로 로그인, 정보공유 게시글 | 댓글 작성 화면 확인 | 익명 옵션 존재하지 않음 | ⬜ |
| CMT-004 | 500자 초과 댓글 거부 | 정회원으로 로그인 | 501자 이상 댓글 작성 시도 | "댓글은 500자 이내여야 합니다" 메시지 | ⬜ |
| CMT-005 | 500자 정상 저장 | 정회원으로 로그인 | 정확히 500자 댓글 작성 | 댓글 정상 등록 | ⬜ |
| CMT-006 | 빈 내용 댓글 거부 | 정회원으로 로그인 | 내용 없이 댓글 작성 시도 | "내용을 입력해 주세요" 메시지 | ⬜ |
| CMT-007 | 삭제된 게시글에 댓글 작성 불가 | 삭제된 게시글 존재 | 삭제된 게시글에 댓글 작성 시도 | "삭제된 게시글입니다" 메시지, 작성 불가 | ⬜ |
| CMT-008 | 댓글 작성 10초 이내 완료 | 정회원으로 로그인 | 댓글 작성 및 저장 | 10초 이내 완료 | ⬜ |

### 2.2 대댓글 작성

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-010 | 대댓글 작성 | 댓글이 있는 게시글 | 댓글의 답글 버튼 클릭 후 내용 작성 | 해당 댓글 하위에 대댓글 표시 | ⬜ |
| CMT-011 | 대댓글에 대댓글 불가 | 대댓글 존재 | 대댓글의 답글 버튼 클릭 | "대댓글에는 답글을 달 수 없습니다" 또는 버튼 미표시 | ⬜ |
| CMT-012 | 대댓글 익명 작성 (익명 허용 게시판) | 자유게시판 게시글 | 대댓글 익명 옵션 선택 후 작성 | 대댓글 "익명"으로 표시 | ⬜ |
| CMT-013 | 대댓글 500자 제한 | 정회원으로 로그인 | 501자 대댓글 작성 시도 | "댓글은 500자 이내여야 합니다" 메시지 | ⬜ |
| CMT-014 | 대댓글 depth 1단계 제한 | 댓글 존재 | 대댓글의 대댓글 작성 API 호출 | 400 Bad Request 또는 거부 | ⬜ |

### 2.3 댓글 조회

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-020 | 댓글 계층 구조 표시 | 댓글과 대댓글이 있는 게시글 | 게시글 상세 페이지 조회 | 댓글과 대댓글이 계층 구조로 표시 | ⬜ |
| CMT-021 | 삭제된 댓글 표시 | 삭제된 댓글 존재 | 댓글 목록 조회 | "삭제된 댓글입니다"로 표시 | ⬜ |
| CMT-022 | 삭제된 댓글의 대댓글 유지 | 삭제된 댓글에 대댓글 존재 | 댓글 목록 조회 | 부모 "삭제된 댓글입니다", 대댓글 정상 표시 | ⬜ |
| CMT-023 | 댓글 등록순 정렬 | 여러 댓글 존재 | 댓글 목록 조회 | 오래된 댓글이 먼저 표시 (등록순) | ⬜ |
| CMT-024 | 댓글 전체 로드 (페이지네이션 없음) | 50개 이상 댓글 존재 | 게시글 상세 조회 | 모든 댓글 한 번에 로드 | ⬜ |
| CMT-025 | 익명 댓글 작성자 비노출 | 익명 댓글 존재 | 댓글 목록 조회 | 작성자 "익명"으로 표시, ID 노출 없음 | ⬜ |
| CMT-026 | 관리자 익명 댓글 작성자 조회 | 운영진으로 로그인, 익명 댓글 존재 | 익명 댓글 작성자 정보 조회 | 실제 작성자 정보 확인 가능 | ⬜ |

### 2.4 댓글 삭제

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-030 | 본인 댓글 삭제 | 본인이 작성한 댓글 | 삭제 버튼 클릭 후 확인 | "삭제된 댓글입니다"로 변경 (Soft Delete) | ⬜ |
| CMT-031 | 대댓글 있는 댓글 삭제 | 대댓글이 있는 댓글 | 부모 댓글 삭제 | 부모 "삭제된 댓글입니다", 대댓글 유지 | ⬜ |
| CMT-032 | 타인 댓글 삭제 버튼 미표시 | 타인이 작성한 댓글 | 댓글 확인 | 삭제 버튼 미표시 | ⬜ |
| CMT-033 | 타인 댓글 삭제 API 접근 거부 | 타인이 작성한 댓글 | 삭제 API 직접 호출 | 403 Forbidden 응답 | ⬜ |
| CMT-034 | 관리자 타인 댓글 삭제 | 관리자로 로그인, 타인 댓글 | 댓글 삭제 시도 | 관리자 권한으로 삭제 가능 | ⬜ |
| CMT-035 | 익명 댓글 본인 삭제 | 본인이 익명으로 작성한 댓글 | 삭제 버튼 클릭 | 정상 삭제 (세션 기반 소유권 검증) | ⬜ |
| CMT-036 | 익명 댓글 타인 삭제 시도 | 타인이 익명으로 작성한 댓글 | 삭제 API 직접 호출 | 403 Forbidden 응답 | ⬜ |

### 2.5 댓글 좋아요

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-040 | 댓글 좋아요 추가 | 정회원으로 로그인, 타인 댓글 존재 | 좋아요 버튼 클릭 | 좋아요 추가, 좋아요 수 1 증가 | ⬜ |
| CMT-041 | 댓글 좋아요 취소 | 이미 좋아요한 댓글 | 좋아요 버튼 다시 클릭 | 좋아요 취소, 좋아요 수 1 감소 | ⬜ |
| CMT-042 | 본인 댓글 좋아요 불가 | 본인이 작성한 댓글 | 좋아요 버튼 클릭 | 좋아요 불가, 안내 메시지 또는 버튼 비활성화 | ⬜ |
| CMT-043 | 좋아요 수 공개 표시 | 좋아요가 있는 댓글 | 댓글 조회 | 좋아요 수 표시 | ⬜ |

### 2.6 댓글 신고

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-050 | 댓글 신고 접수 | 정회원으로 로그인, 타인 댓글 존재 | 신고 버튼 클릭, 신고 사유 입력 | 신고 접수, 관리자 검토 대기열 추가 | ⬜ |
| CMT-051 | 동일 댓글 중복 신고 방지 | 이미 신고한 댓글 | 동일 댓글 재신고 시도 | 중복 신고 거부 또는 안내 메시지 | ⬜ |
| CMT-052 | 관리자 신고 검토 대기열 확인 | 관리자로 로그인, 신고 존재 | 신고 대기열 조회 | 신고된 댓글 목록 표시 | ⬜ |
| CMT-053 | 관리자 신고 처리 | 관리자로 로그인, 신고 존재 | 신고 처리 (승인/거부) | 신고 상태 업데이트 | ⬜ |

### 2.7 댓글 멘션(@)

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-060 | 멘션 댓글 작성 | 정회원으로 로그인 | @사용자명 포함 댓글 작성 | 댓글 저장, 멘션 대상에게 알림 발송 | ⬜ |
| CMT-061 | 멘션 인앱 알림 | 멘션 댓글 작성 완료 | 멘션된 사용자 알림 확인 | 인앱 알림 수신 | ⬜ |
| CMT-062 | 멘션 이메일 알림 | 멘션 댓글 작성 완료 | 멘션된 사용자 이메일 확인 | 이메일 알림 수신 | ⬜ |
| CMT-063 | 멘션 대상 범위 (정회원 이상) | 정회원으로 로그인 | 준회원 멘션 시도 | 멘션 불가 또는 알림 미발송 | ⬜ |
| CMT-064 | 멘션 하이라이트 표시 | 멘션 포함 댓글 존재 | 댓글 조회 | 멘션 부분 하이라이트 표시 | ⬜ |
| CMT-065 | 존재하지 않는 사용자 멘션 | 정회원으로 로그인 | @존재하지않는사용자 입력 | 댓글 저장 가능, 알림 미발송 | ⬜ |

### 2.8 Edge Cases

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| CMT-070 | 댓글 작성 중 게시글 삭제 | 댓글 작성 중 | 게시글이 삭제된 후 저장 시도 | 저장 실패, "삭제된 게시글입니다" 메시지 | ⬜ |
| CMT-071 | 대댓글의 부모 댓글 삭제 | 대댓글 존재 | 부모 댓글 삭제 | 부모 "삭제된 댓글입니다", 대댓글 유지 | ⬜ |
| CMT-072 | 삭제된 댓글에 좋아요 시도 | 삭제된 댓글 존재 | 좋아요 API 호출 | 좋아요 불가, 적절한 에러 응답 | ⬜ |
| CMT-073 | 삭제된 댓글 신고 시도 | 삭제된 댓글 존재 | 신고 API 호출 | 신고 불가, 적절한 에러 응답 | ⬜ |

---

## 3. 관련 Functional Requirements

| ID | 요구사항 | 관련 테스트 케이스 |
|----|---------|------------------|
| FR-001 | 댓글 내용 최대 500자 | CMT-004, CMT-005, CMT-013 |
| FR-002 | 대댓글 1단계까지만 허용 | CMT-011, CMT-014 |
| FR-003 | 익명 허용 게시판에서만 익명 댓글 가능 | CMT-002, CMT-003, CMT-012 |
| FR-004 | 본인 댓글만 삭제 가능 (관리자 예외) | CMT-030 ~ CMT-036 |
| FR-005 | 댓글 삭제 시 Soft Delete | CMT-030, CMT-031 |
| FR-006 | 삭제된 댓글 "삭제된 댓글입니다" 표시 | CMT-021, CMT-030 |
| FR-007 | 대댓글 있는 댓글 삭제 시 대댓글 유지 | CMT-031, CMT-071 |
| FR-008 | 댓글 수정 기능 미제공 | - |
| FR-009 | 게시글 상세 조회 시 댓글 계층 구조 반환 | CMT-020 |
| FR-010 | 삭제된 게시글에 댓글 작성 불가 | CMT-007 |
| FR-012 | 댓글 등록순 정렬 | CMT-023 |
| FR-013 | 익명 댓글 DB 작성자 저장, API 응답에서 숨김 | CMT-025, CMT-026 |
| FR-014 | 댓글 전체 로드 (페이지네이션 없음) | CMT-024 |
| FR-015 | 댓글 좋아요 (취소 가능, 본인 댓글 불가) | CMT-040 ~ CMT-043 |
| FR-016 | 댓글 신고 (관리자 수동 처리) | CMT-050 ~ CMT-053 |
| FR-017 | 댓글 멘션 (인앱 + 이메일 알림) | CMT-060 ~ CMT-065 |

---

## 4. 구현된 테스트 클래스

> 테스트 구현 시 업데이트 예정

### 4.1 Service 테스트
- **파일**: `backend/src/test/java/igrus/web/community/comment/service/CommentServiceTest.java`
- **테스트 범위**: CMT-001 ~ CMT-073 (비즈니스 로직)

### 4.2 Controller 테스트
- **파일**: `backend/src/test/java/igrus/web/community/comment/controller/CommentControllerTest.java`
- **테스트 범위**: CMT-001 ~ CMT-073 (HTTP 레이어)

### 4.3 통합 테스트
- **파일**: `backend/src/test/java/igrus/web/community/comment/integration/CommentIntegrationTest.java`
- **테스트 범위**: 전체 플로우 통합 테스트

---

## 5. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-26 | - | 최초 작성 |
