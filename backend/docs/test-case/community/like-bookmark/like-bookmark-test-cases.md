# 좋아요/북마크 (Like/Bookmark) 테스트 케이스

**작성일**: 2026-01-26
**버전**: 1.3
**관련 스펙**: [like-bookmark-spec.md](../../../../../docs/feature/community/like-bookmark-spec.md)
**우선순위**: P2

---

## 1. 개요

게시글 좋아요 및 북마크 기능에 대한 테스트 케이스입니다. 좋아요/북마크 토글, 목록 조회, 권한 처리 등을 검증합니다.

---

## 2. 테스트 케이스

### 2.1 게시글 좋아요

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-001 | 게시글 좋아요 추가 | 정회원으로 로그인, 게시글 존재 | 좋아요 버튼 클릭 | 좋아요 추가, 좋아요 수 1 증가 | ✅ |
| LKB-002 | 게시글 좋아요 취소 | 이미 좋아요한 게시글 | 좋아요 버튼 다시 클릭 | 좋아요 취소, 좋아요 수 1 감소 | ✅ |
| LKB-003 | 본인 게시글 좋아요 가능 | 본인이 작성한 게시글 | 좋아요 버튼 클릭 | 좋아요 추가 가능 | ✅ |
| LKB-004 | 좋아요 상태 버튼 표시 | 좋아요한 게시글 | 게시글 상세 조회 | 좋아요 버튼 활성화 상태 표시 | ⬜ |
| LKB-005 | 좋아요 수 표시 | 좋아요가 있는 게시글 | 게시글 목록/상세 조회 | 좋아요 수 표시 | ⬜ |
| LKB-006 | 좋아요 1인 1회 제한 | 이미 좋아요한 게시글 | 좋아요 API 중복 호출 | 중복 좋아요 불가 (토글로 동작) | ✅ |
| LKB-007 | 좋아요 토글 1초 이내 반영 | 정회원으로 로그인 | 좋아요 버튼 클릭 | 1초 이내 UI 반영 | ⬜ |
| LKB-008 | 좋아요한 사용자 목록 비공개 | 좋아요가 있는 게시글 | 좋아요 사용자 목록 조회 시도 | 조회 불가, 좋아요 수만 공개 | ⬜ |

### 2.2 게시글 북마크

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-010 | 게시글 북마크 추가 | 정회원으로 로그인, 게시글 존재 | 북마크 버튼 클릭 | 북마크 추가, 버튼 활성화 상태 변경 | ✅ |
| LKB-011 | 게시글 북마크 취소 | 이미 북마크한 게시글 | 북마크 버튼 다시 클릭 | 북마크 취소, 버튼 비활성화 상태 변경 | ✅ |
| LKB-012 | 북마크 상태 버튼 표시 | 북마크한 게시글 | 게시글 상세 조회 | 북마크 버튼 활성화 상태 표시 | ⬜ |
| LKB-013 | 북마크 1인 1회 제한 | 이미 북마크한 게시글 | 북마크 API 중복 호출 | 중복 북마크 불가 (토글로 동작) | ✅ |
| LKB-014 | 북마크 토글 1초 이내 반영 | 정회원으로 로그인 | 북마크 버튼 클릭 | 1초 이내 UI 반영 | ⬜ |
| LKB-015 | 북마크 정보 본인만 조회 | 정회원으로 로그인 | 타인 북마크 정보 조회 시도 | 조회 불가, 403 Forbidden | ⬜ |

### 2.3 마이페이지 북마크 목록

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-020 | 북마크 목록 조회 | 북마크한 게시글 존재 | 마이페이지 북마크 목록 접근 | 북마크한 게시글 목록 표시 | ✅ |
| LKB-021 | 삭제된 게시글 북마크 표시 | 북마크한 게시글이 삭제됨 | 북마크 목록 조회 | "삭제된 게시글입니다" 표시, 클릭 불가 | ✅ |
| LKB-022 | 북마크 목록 페이지네이션 | 25개 이상 북마크 존재 | 북마크 목록 조회 | 페이지당 20개, 무한 스크롤 | ✅ |
| LKB-023 | 북마크 목록 3초 이내 로드 | 북마크 존재 | 북마크 목록 조회 | 3초 이내 로드 완료 | ⬜ |
| LKB-024 | 빈 북마크 목록 | 북마크 없음 | 북마크 목록 조회 | "북마크한 게시글이 없습니다" 안내 | ✅ |

### 2.4 마이페이지 좋아요 목록

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-030 | 좋아요 목록 조회 | 좋아요한 게시글 존재 | 마이페이지 좋아요 목록 접근 | 좋아요한 게시글 목록 최신순 표시 | ✅ |
| LKB-031 | 삭제된 게시글 좋아요 표시 | 좋아요한 게시글이 삭제됨 | 좋아요 목록 조회 | "삭제된 게시글입니다" 표시, 클릭 불가 | ✅ |
| LKB-032 | 좋아요 목록 페이지네이션 | 25개 이상 좋아요 존재 | 좋아요 목록 조회 | 페이지당 20개, 무한 스크롤 | ✅ |
| LKB-033 | 좋아요 목록 3초 이내 로드 | 좋아요 존재 | 좋아요 목록 조회 | 3초 이내 로드 완료 | ⬜ |
| LKB-034 | 빈 좋아요 목록 | 좋아요 없음 | 좋아요 목록 조회 | "좋아요한 게시글이 없습니다" 안내 | ✅ |

### 2.5 삭제된 게시글 처리

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-040 | 삭제된 게시글 좋아요 시도 | 삭제된 게시글 존재 | 좋아요 API 호출 | 좋아요 불가, "삭제된 게시글입니다" 메시지 | ✅ |
| LKB-041 | 삭제된 게시글 북마크 시도 | 삭제된 게시글 존재 | 북마크 API 호출 | 북마크 불가, "삭제된 게시글입니다" 메시지 | ✅ |
| LKB-042 | 삭제된 게시글 좋아요 취소 | 좋아요한 게시글이 삭제됨 | 좋아요 취소 API 호출 | 취소 가능 (Hard Delete) | ⬜ |
| LKB-043 | 삭제된 게시글 북마크 취소 | 북마크한 게시글이 삭제됨 | 북마크 취소 API 호출 | 취소 가능 (Hard Delete) | ⬜ |

### 2.6 권한 처리

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-050 | 비회원 좋아요 버튼 표시 | 비로그인 상태 | 게시글 상세 조회 | 좋아요 버튼 표시 | ⬜ |
| LKB-051 | 비회원 좋아요 클릭 시 안내 | 비로그인 상태 | 좋아요 버튼 클릭 | "로그인이 필요합니다" 안내 메시지 | ⬜ |
| LKB-052 | 준회원 좋아요 버튼 표시 | 준회원으로 로그인 | 게시글 상세 조회 | 좋아요 버튼 표시 | ⬜ |
| LKB-053 | 준회원 좋아요 클릭 시 안내 | 준회원으로 로그인 | 좋아요 버튼 클릭 | "정회원 승인이 필요합니다" 안내 메시지 | ⬜ |
| LKB-054 | 비회원 북마크 버튼 표시 | 비로그인 상태 | 게시글 상세 조회 | 북마크 버튼 표시 | ⬜ |
| LKB-055 | 비회원 북마크 클릭 시 안내 | 비로그인 상태 | 북마크 버튼 클릭 | "로그인이 필요합니다" 안내 메시지 | ⬜ |
| LKB-056 | 준회원 북마크 클릭 시 안내 | 준회원으로 로그인 | 북마크 버튼 클릭 | "정회원 승인이 필요합니다" 안내 메시지 | ⬜ |
| LKB-057 | 북마크한 게시판 권한 상실 | 게시판 접근 권한 변경 | 북마크 목록에서 해당 게시글 클릭 | "권한이 없습니다" 메시지 표시 | ⬜ |

### 2.7 Rate Limiting

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-060 | 분당 30회 좋아요 제한 | 정회원으로 로그인 | 분당 31회 좋아요 API 호출 | 31번째 요청에서 429 Too Many Requests | ⬜ |
| LKB-061 | 분당 30회 북마크 제한 | 정회원으로 로그인 | 분당 31회 북마크 API 호출 | 31번째 요청에서 429 Too Many Requests | ⬜ |
| LKB-062 | 분당 30회 이내 정상 처리 | 정회원으로 로그인 | 분당 30회 이내 요청 | 모든 요청 정상 처리 | ⬜ |

### 2.8 동시성 처리

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-070 | 동시 좋아요 정확한 카운트 | 여러 사용자 동시 접속 | 같은 게시글에 동시 좋아요 | 좋아요 수 정확히 반영 | ⬜ |
| LKB-071 | 동시 좋아요 중복 방지 | 같은 사용자 다중 요청 | 동시에 여러 좋아요 요청 | 1회만 처리, 중복 방지 | ⬜ |
| LKB-072 | 좋아요 수 실시간 반영 | 여러 사용자 좋아요 | 게시글 조회 | 좋아요 수 실시간 정확히 반영 | ⬜ |

### 2.9 게시글 상세 조회 시 상태 포함

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-080 | 좋아요/북마크 상태 응답 포함 | 정회원으로 로그인, 좋아요/북마크 존재 | 게시글 상세 조회 | 응답에 현재 사용자의 좋아요/북마크 상태 포함 | ⬜ |
| LKB-081 | 좋아요 안 한 상태 응답 | 정회원으로 로그인, 좋아요 안 함 | 게시글 상세 조회 | 좋아요 상태 false 응답 | ⬜ |
| LKB-082 | 북마크 안 한 상태 응답 | 정회원으로 로그인, 북마크 안 함 | 게시글 상세 조회 | 북마크 상태 false 응답 | ⬜ |

### 2.10 Edge Cases

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| LKB-090 | 게시글 삭제 후 좋아요 목록 | 좋아요한 게시글 삭제 | 좋아요 목록 조회 | 삭제된 게시글 표시 유지, "삭제된 게시글입니다" | ✅ |
| LKB-091 | 게시글 삭제 후 북마크 목록 | 북마크한 게시글 삭제 | 북마크 목록 조회 | 삭제된 게시글 표시 유지, "삭제된 게시글입니다" | ✅ |
| LKB-092 | 좋아요 취소 시 Hard Delete | 좋아요한 게시글 | 좋아요 취소 | 좋아요 레코드 완전 삭제 | ✅ |
| LKB-093 | 북마크 취소 시 Hard Delete | 북마크한 게시글 | 북마크 취소 | 북마크 레코드 완전 삭제 | ✅ |

---

## 3. 관련 Functional Requirements

| ID | 요구사항 | 관련 테스트 케이스 |
|----|---------|------------------|
| FR-001 | 게시글당 1인 1회 좋아요 | LKB-006 |
| FR-002 | 좋아요 토글 방식 동작 | LKB-001, LKB-002 |
| FR-003 | 본인 게시글 좋아요 가능 | LKB-003 |
| FR-004 | 게시글당 1인 1회 북마크 | LKB-013 |
| FR-005 | 북마크 토글 방식 동작 | LKB-010, LKB-011 |
| FR-006 | 북마크 목록 마이페이지 조회 | LKB-020 ~ LKB-024 |
| FR-007 | 좋아요 목록 마이페이지 조회 | LKB-030 ~ LKB-034 |
| FR-008 | 삭제된 게시글 좋아요/북마크 추가 불가 | LKB-040, LKB-041 |
| FR-009 | 게시글 상세 조회 시 좋아요/북마크 상태 포함 | LKB-080 ~ LKB-082 |
| FR-010 | 게시글 목록/상세에서 좋아요 수 표시 | LKB-005 |
| FR-011 | 좋아요한 사용자 목록 비공개, 좋아요 수만 공개 | LKB-008 |
| FR-012 | 북마크 정보 본인만 조회 가능 | LKB-015 |
| FR-013 | 좋아요/북마크 API 사용자당 분당 30회 제한 | LKB-060 ~ LKB-062 |
| FR-014 | 비회원/준회원 버튼 표시 + 클릭 시 권한 안내 | LKB-050 ~ LKB-056 |
| FR-015 | 마이페이지 목록 페이지당 20개 무한 스크롤 | LKB-022, LKB-032 |

---

## 4. 구현된 테스트 클래스

### 4.1 Service 테스트 (구현 완료)
- **파일**: `backend/src/test/java/igrus/web/community/like/service/LikeServiceTest.java`
  - 총 24개 테스트 케이스
  - 커버리지: LKB-001, LKB-002, LKB-003, LKB-006, LKB-030, LKB-031, LKB-032, LKB-034, LKB-040, LKB-090, LKB-092
- **파일**: `backend/src/test/java/igrus/web/community/bookmark/service/BookmarkServiceTest.java`
  - 총 19개 테스트 케이스
  - 커버리지: LKB-010, LKB-011, LKB-013, LKB-020, LKB-021, LKB-022, LKB-024, LKB-041, LKB-091, LKB-093

### 4.2 Controller 테스트 (구현 완료)

#### PostLikeControllerTest
- **파일**: `backend/src/test/java/igrus/web/community/like/post_like/controller/PostLikeControllerTest.java`
- **테스트 범위**: 게시글 좋아요 HTTP 레이어 통합 테스트
- **구현된 테스트 케이스**:
  - `ToggleLikeTest` 내부 클래스: LKB-001, LKB-002, LKB-003, LKB-040, 존재하지 않는 게시글 좋아요 시도, 준회원 접근 거부
  - `GetLikeStatusTest` 내부 클래스: 좋아요 상태 조회, 좋아요 안 한 상태 조회
  - `GetMyLikesTest` 내부 클래스: LKB-030, LKB-032, 빈 목록 조회

#### BookmarkControllerTest
- **파일**: `backend/src/test/java/igrus/web/community/bookmark/controller/BookmarkControllerTest.java`
- **테스트 범위**: 북마크 HTTP 레이어 통합 테스트
- **구현된 테스트 케이스**:
  - `ToggleBookmarkTest` 내부 클래스: LKB-010, LKB-011, LKB-041, 존재하지 않는 게시글 북마크 시도, 준회원 접근 거부
  - `GetBookmarkStatusTest` 내부 클래스: 북마크 상태 조회, 북마크 안 한 상태 조회
  - `GetMyBookmarksTest` 내부 클래스: LKB-020, LKB-022, 빈 목록 조회

#### CommentLikeControllerTest
- **파일**: `backend/src/test/java/igrus/web/community/like/comment_like/controller/CommentLikeControllerTest.java`
- **테스트 범위**: 댓글 좋아요 HTTP 레이어 통합 테스트
- **구현된 테스트 케이스**:
  - `LikeCommentTest` 내부 클래스: 좋아요 추가, 본인 댓글 좋아요 불가, 중복 좋아요 방지, 존재하지 않는 댓글 좋아요, 준회원 접근 거부
  - `UnlikeCommentTest` 내부 클래스: 좋아요 취소, 좋아요하지 않은 댓글 취소 시도, 존재하지 않는 댓글 좋아요 취소, 준회원 접근 거부

### 4.3 통합 테스트 (미구현)
- **파일**: `backend/src/test/java/igrus/web/community/like/integration/LikeIntegrationTest.java` - TODO
- **파일**: `backend/src/test/java/igrus/web/community/bookmark/integration/BookmarkIntegrationTest.java` - TODO
- **테스트 범위**: 전체 플로우 통합 테스트

---

## 5. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-26 | - | 최초 작성 |
| 1.1 | 2026-01-28 | - | Service 단위 테스트 구현 완료, Controller/통합 테스트 미구현 표시 |
| 1.2 | 2026-01-28 | - | 테스트 케이스 상태 업데이트 (21개 완료), 커버리지 정보 갱신 |
| 1.3 | 2026-01-28 | - | Controller 통합 테스트 구현 완료 (PostLikeControllerTest, BookmarkControllerTest, CommentLikeControllerTest), 테스트 클래스 목록 상세화 |
