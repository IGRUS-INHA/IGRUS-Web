# 게시글(Post) 테스트 케이스

**작성일**: 2026-01-26
**버전**: 1.1
**관련 스펙**: [post-spec.md](../../../../../docs/feature/community/post-spec.md)
**우선순위**: P1

---

## 1. 개요

게시글 기능에 대한 테스트 케이스입니다. 게시글 작성, 조회, 수정, 삭제 및 이미지 첨부, 익명 작성, 질문 태그 등 게시글 관련 핵심 기능을 검증합니다.

---

## 2. 테스트 케이스

### 2.1 게시글 작성

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-001 | 일반 게시글 작성 | 정회원으로 로그인 | 자유게시판에서 제목, 내용 입력 후 저장 | 게시글 등록 및 상세 화면 이동 | ✅ |
| PST-002 | 익명 게시글 작성 | 정회원으로 로그인 | 자유게시판에서 익명 옵션 선택 후 저장 | 게시글 작성자 "익명"으로 표시 | ✅ |
| PST-003 | 질문 태그 게시글 작성 | 정회원으로 로그인 | 자유게시판에서 "질문으로 등록" 선택 후 저장 | 게시글에 질문 태그 표시 | ✅ |
| PST-004 | 제목 100자 초과 거부 | 정회원으로 로그인 | 101자 이상 제목 입력 후 저장 시도 | 저장 거부, "제목은 100자 이내여야 합니다" 메시지 | ✅ |
| PST-005 | 제목 100자 정상 저장 | 정회원으로 로그인 | 정확히 100자 제목 입력 후 저장 | 게시글 정상 등록 | ✅ |
| PST-006 | 본문 10,000자 제한 | 정회원으로 로그인 | 10,001자 이상 본문 입력 후 저장 시도 | 저장 거부, 글자 수 제한 안내 | ⬜ |
| PST-007 | 제목 빈 값 저장 거부 | 정회원으로 로그인 | 제목 비워두고 저장 시도 | 저장 거부, "제목을 입력해 주세요" 메시지 | ✅ |
| PST-008 | 내용 빈 값 저장 거부 | 정회원으로 로그인 | 내용 비워두고 저장 시도 | 저장 거부, "내용을 입력해 주세요" 메시지 | ✅ |

### 2.2 이미지/파일 첨부

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-010 | 이미지 1개 첨부 | 정회원으로 로그인 | 이미지 1개 첨부 후 저장 | 게시글에 이미지 포함되어 저장 | ✅ |
| PST-011 | 이미지 5개 첨부 | 정회원으로 로그인 | 이미지 5개 첨부 후 저장 | 모든 이미지 포함되어 저장 | ✅ |
| PST-012 | 이미지 5개 초과 첨부 거부 | 정회원으로 로그인 | 이미지 6개 이상 첨부 시도 | "이미지는 최대 5개까지 첨부 가능합니다" 메시지 | ✅ |
| PST-013 | 10MB 초과 이미지 거부 | 정회원으로 로그인 | 11MB 이미지 첨부 시도 | "이미지는 10MB 이하만 가능합니다" 메시지 | ⬜ |
| PST-014 | 10MB 이하 이미지 정상 첨부 | 정회원으로 로그인 | 10MB 이하 이미지 첨부 후 저장 | 이미지 정상 첨부 | ⬜ |
| PST-015 | 파일 첨부 (문서) | 정회원으로 로그인 | PDF/문서 파일 첨부 후 저장 | 파일 정상 첨부 | ⬜ |
| PST-016 | 첨부파일 10개 제한 | 정회원으로 로그인 | 11개 이상 파일 첨부 시도 | "첨부파일은 최대 10개까지 가능합니다" 메시지 | ⬜ |
| PST-017 | S3 업로드 실패 시 게시글 저장 | 정회원으로 로그인 | 이미지 첨부 중 S3 업로드 실패 | 게시글 저장 성공, 실패한 이미지 건너뛰고 알림 | ⬜ |

### 2.3 게시글 조회

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-020 | 게시글 상세 조회 | 게시글 존재 | 게시글 선택 | 제목, 내용, 작성자, 작성일, 조회수, 좋아요 수, 댓글 수 표시 | ✅ |
| PST-021 | 조회수 자동 증가 | 게시글 존재 | 게시글 상세 페이지 접근 | 조회수 1 증가 | ✅ |
| PST-022 | 익명 게시글 작성자 비노출 | 익명 게시글 존재 | 게시글 상세 조회 | 작성자 "익명"으로 표시, ID 노출 없음 | ✅ |
| PST-023 | 삭제된 게시글 접근 | 삭제된 게시글 ID 존재 | 삭제된 게시글 직접 접근 | "삭제된 게시글입니다" 메시지 표시 | ✅ |
| PST-024 | 게시글 목록 최신순 정렬 | 여러 게시글 존재 | 게시글 목록 조회 | 최신 작성글 상단 표시 | ✅ |
| PST-025 | 게시글 목록 기본 20개 | 30개 이상 게시글 존재 | 게시글 목록 첫 페이지 조회 | 20개 게시글 반환 | ✅ |
| PST-026 | 게시글 상세 이미지 로드 | 이미지가 포함된 게시글 존재 | 게시글 상세 조회 | 5초 이내 이미지 포함 페이지 로드 | ✅ |

### 2.4 게시글 수정

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-030 | 본인 게시글 수정 화면 접근 | 본인이 작성한 게시글 존재 | 수정 버튼 클릭 | 수정 화면 표시 | ⬜ |
| PST-031 | 게시글 제목/내용 수정 | 수정 화면 진입 | 제목, 내용 변경 후 저장 | 변경 내용 반영, 수정일 업데이트 | ✅ |
| PST-032 | 익명 게시글 익명 설정 변경 불가 | 익명으로 작성한 게시글 존재 | 수정 화면에서 익명 설정 확인 | 익명 설정 변경 옵션 없음 또는 비활성화 | ⬜ |
| PST-033 | 타인 게시글 수정 버튼 미표시 | 타인이 작성한 게시글 | 게시글 상세 조회 | 수정 버튼 미표시 | ⬜ |
| PST-034 | 타인 게시글 수정 API 접근 거부 | 타인이 작성한 게시글 | 수정 API 직접 호출 | 403 Forbidden 응답 | ✅ |
| PST-035 | 익명 게시글 본인 수정 | 본인이 익명으로 작성한 게시글 | 수정 버튼 클릭 후 수정 | 정상 수정 가능 (세션 기반 소유권 검증) | ✅ |
| PST-036 | 익명 게시글 타인 수정 시도 | 타인이 익명으로 작성한 게시글 | 수정 API 직접 호출 | 403 Forbidden, "수정 권한이 없습니다" | ✅ |

### 2.5 게시글 삭제

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-040 | 본인 게시글 삭제 | 본인이 작성한 게시글 | 삭제 버튼 클릭 후 확인 | 게시글 삭제 처리 (Soft Delete) | ✅ |
| PST-041 | 삭제된 게시글 목록 제외 | 게시글 삭제 완료 | 게시글 목록 조회 | 삭제된 글 목록에서 제외 | ✅ |
| PST-042 | 댓글 있는 게시글 삭제 | 댓글이 달린 게시글 존재 | 게시글 삭제 | "삭제된 게시글입니다" 표시, 댓글은 유지 | ⬜ |
| PST-043 | 관리자 타인 게시글 삭제 | 관리자로 로그인, 타인 게시글 존재 | 게시글 삭제 시도 | 관리자 권한으로 삭제 가능 | ✅ |
| PST-044 | 타인 게시글 삭제 버튼 미표시 | 정회원으로 로그인, 타인 게시글 | 게시글 상세 조회 | 삭제 버튼 미표시 | ⬜ |
| PST-045 | 타인 게시글 삭제 API 접근 거부 | 정회원으로 로그인, 타인 게시글 | 삭제 API 직접 호출 | 403 Forbidden 응답 | ✅ |
| PST-046 | 익명 게시글 본인 삭제 | 본인이 익명으로 작성한 게시글 | 삭제 버튼 클릭 후 확인 | 정상 삭제 (세션 기반 소유권 검증) | ✅ |
| PST-047 | 익명 게시글 타인 삭제 시도 | 타인이 익명으로 작성한 게시글 | 삭제 API 직접 호출 | 403 Forbidden, "삭제 권한이 없습니다" | ✅ |

### 2.6 공지사항 작성

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-050 | 운영진 공지사항 작성 | 운영진(OPERATOR)으로 로그인 | 공지사항에서 제목, 내용 입력 후 저장 | 공지사항 등록 | ✅ |
| PST-051 | 공지사항 준회원 공개 설정 | 운영진으로 로그인 | "준회원에게 공개" 옵션 선택 후 저장 | 준회원도 해당 공지 조회 가능 | ✅ |
| PST-052 | 공지사항 익명 옵션 없음 | 운영진으로 로그인 | 공지사항 작성 화면 확인 | 익명 작성 옵션 존재하지 않음 | ✅ |
| PST-053 | 정회원 공지사항 작성 불가 | 정회원으로 로그인 | 공지사항 작성 시도 | 접근 거부 또는 작성 버튼 미표시 | ✅ |

### 2.7 Markdown 지원

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-060 | Markdown 형식 본문 저장 | 정회원으로 로그인 | Markdown 형식으로 본문 작성 후 저장 | Markdown 원문 그대로 저장 | ⬜ |
| PST-061 | Markdown 렌더링 표시 | Markdown 게시글 존재 | 게시글 상세 조회 | Markdown이 HTML로 렌더링되어 표시 | ⬜ |
| PST-062 | XSS 스크립트 Sanitize | 정회원으로 로그인 | `<script>` 태그 포함 본문 작성 | 스크립트 태그 제거 또는 이스케이프 처리 | ⬜ |

### 2.8 게시글 검색 및 필터

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-070 | 제목+내용 검색 | 게시글 존재 | 키워드로 검색 | 제목 또는 내용에 키워드 포함된 게시글 반환 | ✅ |
| PST-071 | 질문만 필터 | 질문 태그 게시글 존재 | 질문만 필터 적용 | 질문 태그가 있는 게시글만 표시 | ✅ |
| PST-072 | 검색 결과 정렬 | 검색 결과 존재 | 검색 후 목록 확인 | 최신순 정렬 유지 | ✅ |

### 2.9 작성 제한 (Rate Limiting)

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-080 | 시간당 20회 작성 제한 | 정회원으로 로그인 | 시간당 21회 게시글 작성 시도 | 21번째 요청에서 429 Too Many Requests | ✅ |
| PST-081 | 시간당 20회 이내 정상 작성 | 정회원으로 로그인 | 시간당 20회 이내 게시글 작성 | 모든 요청 정상 처리 | ✅ |

### 2.10 Edge Cases

| ID | 테스트 케이스 | 사전 조건 | 테스트 단계 | 예상 결과 | 상태 |
|----|-------------|----------|-----------|----------|------|
| PST-090 | 작성 중 세션 만료 | 게시글 작성 화면 진입 | 세션 만료 후 저장 시도 | 재로그인 안내 | ⬜ |
| PST-091 | 동시 수정 시 마지막 저장 반영 | 두 세션에서 같은 게시글 수정 | 두 세션 순차적으로 저장 | 마지막 저장이 반영됨 (낙관적 동시성) | ⬜ |
| PST-092 | 삭제된 게시글 수정 시도 | 삭제된 게시글 ID | 수정 API 호출 | 404 Not Found 또는 적절한 에러 응답 | ✅ |

---

## 3. 관련 Functional Requirements

| ID | 요구사항 | 관련 테스트 케이스 |
|----|---------|------------------|
| FR-001 | 게시글 제목 최대 100자 | PST-004, PST-005 |
| FR-002 | 게시글 내용 길이 제한 없음 | PST-006 |
| FR-003 | 게시글당 최대 5개, 10MB 이하 이미지 첨부 | PST-010 ~ PST-017 |
| FR-004 | 자유게시판만 익명 작성, 변경 불가 | PST-002, PST-032, PST-035, PST-036 |
| FR-005 | 자유게시판만 질문으로 등록 옵션 | PST-003, PST-071 |
| FR-006 | 공지사항만 준회원에게 공개 옵션 | PST-051 |
| FR-007 | 본인 게시글만 수정/삭제 (관리자 예외) | PST-030 ~ PST-047 |
| FR-008 | 게시글 삭제 시 Soft Delete | PST-040, PST-041, PST-042 |
| FR-009 | 삭제된 게시글 "삭제된 게시글입니다" 표시 | PST-023, PST-042 |
| FR-010 | 삭제된 게시글의 댓글 유지 | PST-042 |
| FR-011 | 게시글 조회 시 조회수 1 증가 | PST-021 |
| FR-012 | 검색(제목+내용), 정렬(최신순), 필터(질문만) | PST-070 ~ PST-072 |
| FR-013 | 사용자당 시간당 20회 게시글 작성 제한 | PST-080, PST-081 |
| FR-014 | 게시글 목록 기본 페이지 크기 20개 | PST-025 |

---

## 4. 구현된 테스트 클래스

### 4.1 PostServiceTest (단위 테스트)
- **파일**: `backend/src/test/java/igrus/web/board/service/PostServiceTest.java`
- **테스트 범위**: 비즈니스 로직 단위 테스트
- **PST 테스트**:
  - `PstCreatePostTest`: PST-001, PST-002, PST-003, PST-004, PST-005
  - `PstImageAttachmentTest`: PST-010, PST-011, PST-012
  - `PstUpdatePostTest`: PST-031, PST-035, PST-036
  - `PstDeletePostTest`: PST-040, PST-043, PST-046, PST-047
  - `PstNoticeTest`: PST-050, PST-052, PST-053

### 4.2 PostControllerTest (컨트롤러 테스트)
- **파일**: `backend/src/test/java/igrus/web/board/controller/PostControllerTest.java`
- **테스트 범위**: HTTP 레이어 및 Validation 테스트
- **PST 테스트**:
  - `PstCreateValidationTest`: PST-004, PST-007, PST-008, PST-012
  - `PstReadPostTest`: PST-020, PST-021, PST-022, PST-023, PST-024, PST-025, PST-026
  - `PstUpdatePermissionTest`: PST-034
  - `PstDeletePermissionTest`: PST-043, PST-045
  - `PstNoticePermissionTest`: PST-051, PST-053
  - `PstSearchFilterTest`: PST-070, PST-071, PST-072

### 4.3 PostRateLimitServiceTest (Rate Limit 테스트)
- **파일**: `backend/src/test/java/igrus/web/board/service/PostRateLimitServiceTest.java`
- **테스트 범위**: 시간당 작성 제한 로직 테스트
- **PST 테스트**:
  - `PstRateLimitTest`: PST-080, PST-081

### 4.4 PostIntegrationTest (통합 테스트)
- **파일**: `backend/src/test/java/igrus/web/board/integration/PostIntegrationTest.java`
- **테스트 범위**: 전체 플로우 통합 테스트
- **PST 테스트**:
  - `PstAnonymousPostTest`: PST-002, PST-022, PST-035, PST-036, PST-046, PST-047
  - `PstDeleteIntegrationTest`: PST-040, PST-041, PST-043
  - `PstEdgeCasesTest`: PST-092

---

## 5. 변경 이력

| 버전 | 날짜 | 작성자 | 변경 내용 |
|------|------|--------|----------|
| 1.0 | 2026-01-26 | - | 최초 작성 |
| 1.1 | 2026-01-27 | - | PST 테스트 케이스 구현 완료 (48개), 문서 상태 업데이트 |
