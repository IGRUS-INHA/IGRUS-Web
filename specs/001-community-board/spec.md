# Feature Specification: 커뮤니티 (Community)

**Feature Branch**: `001-community-board`
**Created**: 2026-01-25
**Status**: Draft
**Input**: PRD V2 기반 커뮤니티 기능 (게시판, 게시글, 댓글, 좋아요, 북마크)

## 개요

IGRUS 동아리 웹사이트의 커뮤니티 기능으로, 회원들이 게시판을 통해 정보를 공유하고 소통할 수 있는 플랫폼을 제공한다.

**세부 스펙 문서**:
- [게시판 스펙](../../docs/feature/community/board-spec.md)
- [게시글 스펙](../../docs/feature/community/post-spec.md)
- [댓글 스펙](../../docs/feature/community/comment-spec.md)
- [좋아요/북마크 스펙](../../docs/feature/community/like-bookmark-spec.md)

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 게시글 작성 및 조회 (Priority: P1)

정회원이 자유게시판에서 글을 작성하고 다른 회원들이 해당 글을 읽고 댓글을 남긴다.

**Why this priority**: 게시글 작성과 조회는 커뮤니티의 가장 핵심적인 기능으로, 이 기능 없이는 커뮤니티가 존재할 수 없다.

**Independent Test**: 정회원이 글을 작성하고, 다른 회원이 해당 글을 조회하여 댓글을 작성할 수 있으면 테스트 통과

**Acceptance Scenarios**:

1. **Given** 정회원으로 로그인한 상태에서, **When** 자유게시판에서 제목과 내용을 입력하여 글을 작성하면, **Then** 게시글이 등록되고 목록에 표시된다
2. **Given** 게시글이 등록된 상태에서, **When** 다른 정회원이 해당 글을 조회하면, **Then** 제목, 내용, 작성자, 조회수, 댓글 수가 표시된다
3. **Given** 게시글 상세 페이지에서, **When** 정회원이 댓글을 작성하면, **Then** 댓글이 추가되고 댓글 수가 증가한다

---

### User Story 2 - 익명 게시글/댓글 작성 (Priority: P1)

정회원이 자유게시판에서 익명으로 글이나 댓글을 작성하여 자유로운 의견을 표현한다.

**Why this priority**: 익명 기능은 자유로운 의사소통을 위한 핵심 기능이다.

**Independent Test**: 익명 옵션을 선택하여 글/댓글을 작성하고 작성자가 "익명"으로 표시되는지 확인

**Acceptance Scenarios**:

1. **Given** 정회원이 자유게시판에서 글 작성 시, **When** 익명 옵션을 선택하고 저장하면, **Then** 작성자가 "익명"으로 표시되고 작성자 ID가 노출되지 않는다
2. **Given** 익명 게시글에서, **When** 익명 옵션을 선택하고 댓글을 작성하면, **Then** 댓글 작성자도 "익명"으로 표시된다
3. **Given** 정보공유 게시판에서, **When** 글/댓글 작성 시 익명 옵션을 찾으면, **Then** 익명 옵션이 존재하지 않는다

---

### User Story 3 - 게시판별 권한 관리 (Priority: P1)

시스템이 회원 등급에 따라 게시판 접근 권한을 관리하여 적절한 콘텐츠 접근을 보장한다.

**Why this priority**: 권한 관리는 보안과 커뮤니티 운영의 기본이다.

**Independent Test**: 각 회원 등급별로 게시판 접근 시 정의된 권한이 올바르게 적용되는지 확인

**Acceptance Scenarios**:

1. **Given** 준회원이 자유게시판에 접근할 때, **When** 접근을 시도하면, **Then** "정회원 승인 후 이용 가능합니다" 메시지가 표시된다
2. **Given** 정회원이 공지사항에서, **When** 글 작성을 시도하면, **Then** 작성 권한이 없어 작성 버튼이 표시되지 않는다
3. **Given** OPERATOR가 공지사항에서, **When** 글 작성 버튼을 클릭하면, **Then** 글 작성 화면이 표시된다

---

### User Story 4 - 좋아요 및 북마크 (Priority: P2)

정회원이 마음에 드는 글에 좋아요를 누르거나 나중에 보기 위해 북마크한다.

**Why this priority**: 좋아요와 북마크는 사용자 경험을 향상시키지만 핵심 기능보다 부가적이다.

**Independent Test**: 게시글에 좋아요/북마크를 누르고 토글 동작 및 마이페이지 목록 확인

**Acceptance Scenarios**:

1. **Given** 게시글 상세 페이지에서, **When** 좋아요 버튼을 클릭하면, **Then** 좋아요가 추가되고 좋아요 수가 1 증가한다
2. **Given** 이미 좋아요한 게시글에서, **When** 좋아요 버튼을 다시 클릭하면, **Then** 좋아요가 취소되고 좋아요 수가 1 감소한다
3. **Given** 북마크한 게시글이 있는 상태에서, **When** 마이페이지 북마크 목록에 접근하면, **Then** 북마크한 게시글 목록이 표시된다

---

### User Story 5 - 게시글/댓글 삭제 (Priority: P2)

작성자가 본인이 작성한 게시글이나 댓글을 삭제하고 시스템이 Soft Delete를 적용한다.

**Why this priority**: 삭제 기능은 필요하지만 작성/조회보다 사용 빈도가 낮다.

**Independent Test**: 게시글/댓글 삭제 시 "삭제된 게시글/댓글입니다"로 표시되고 대댓글은 유지되는지 확인

**Acceptance Scenarios**:

1. **Given** 댓글이 있는 게시글을 삭제할 때, **When** 삭제를 실행하면, **Then** 게시글은 "삭제된 게시글입니다"로 표시되고 댓글은 유지된다
2. **Given** 대댓글이 있는 댓글을 삭제할 때, **When** 삭제를 실행하면, **Then** 댓글은 "삭제된 댓글입니다"로 표시되고 대댓글은 유지된다

---

### Edge Cases

- 게시판 접근 중 회원 등급이 변경되면? → 다음 요청부터 새로운 권한 적용
- 대댓글에 답글을 달려고 하면? → "대댓글에는 답글을 달 수 없습니다" 메시지
- 삭제된 게시글에 댓글 작성 시도 시? → 작성 불가, 안내 메시지 표시
- 100자 초과 제목으로 저장 시도 시? → 저장 거부, "제목은 100자 이내여야 합니다" 메시지
- 500자 초과 댓글 저장 시도 시? → 저장 거부, "댓글은 500자 이내여야 합니다" 메시지

## Requirements *(mandatory)*

### Functional Requirements

**게시판**
- **FR-001**: 시스템은 공지사항(notices), 자유게시판(general), 정보공유(insight) 3개의 게시판을 제공해야 한다
- **FR-002**: 각 게시판별로 읽기/쓰기 권한이 분리되어 관리되어야 한다
- **FR-003**: 자유게시판만 익명 작성과 질문 태그 기능을 제공해야 한다

**게시글**
- **FR-004**: 게시글 제목은 최대 100자, 이미지는 최대 5개(각 10MB 이하)까지 허용해야 한다
- **FR-005**: 본인 게시글만 수정/삭제 가능해야 한다 (관리자 예외)
- **FR-006**: 게시글 삭제 시 Soft Delete를 적용하고 "삭제된 게시글입니다"로 표시해야 한다
- **FR-007**: 삭제된 게시글의 댓글은 유지되어야 한다

**댓글**
- **FR-008**: 댓글 내용은 최대 500자까지 허용해야 한다
- **FR-009**: 대댓글은 1단계까지만 허용해야 한다 (대댓글의 대댓글 불가)
- **FR-010**: 댓글 삭제 시 Soft Delete를 적용하고 대댓글은 유지해야 한다

**좋아요/북마크**
- **FR-011**: 좋아요와 북마크는 게시글당 1인 1회, 토글 방식으로 동작해야 한다
- **FR-012**: 본인 게시글에도 좋아요가 가능해야 한다
- **FR-013**: 마이페이지에서 좋아요/북마크한 게시글 목록을 조회할 수 있어야 한다

### Key Entities

- **Board**: 게시판 유형 (notices, general, insight), 권한 규칙, 익명/질문 태그 허용 여부
- **Post**: 게시글 - 게시판, 제목, 내용, 작성자, 익명/질문 여부, 조회수, 삭제 여부
- **PostImage**: 게시글 이미지 - 게시글 참조, 이미지 URL, 순서
- **Comment**: 댓글 - 게시글 참조, 부모 댓글 참조, 작성자, 내용, 익명/삭제 여부
- **Like**: 좋아요 - 게시글 참조, 사용자 참조
- **Bookmark**: 북마크 - 게시글 참조, 사용자 참조

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 게시글 작성이 1분 이내에 완료된다
- **SC-002**: 게시글 목록이 3초 이내에 표시된다
- **SC-003**: 댓글 작성이 10초 이내에 완료된다
- **SC-004**: 권한이 없는 사용자의 부적절한 접근이 100% 차단된다
- **SC-005**: 익명 게시글/댓글의 작성자 정보가 외부에 노출되지 않는다
- **SC-006**: 대댓글 depth 제한이 100% 적용된다
- **SC-007**: 삭제된 게시글/댓글의 하위 콘텐츠가 100% 보존된다
- **SC-008**: 좋아요/북마크 토글이 1초 이내에 UI에 반영된다

## Assumptions

- 모든 회원은 이메일 인증이 완료된 상태에서 게시판에 접근한다
- 이미지 업로드는 별도의 파일 서버 또는 클라우드 스토리지를 통해 처리된다
- 조회수는 같은 사용자의 중복 조회도 카운트한다
- 검색 기능은 제목과 내용을 대상으로 키워드 검색을 제공한다
