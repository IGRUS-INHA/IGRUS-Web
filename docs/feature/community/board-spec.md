# Feature Specification: 게시판 (Board)

**Feature Branch**: `001-community-board`
**Created**: 2026-01-25
**Status**: Draft
**Input**: PRD V2 기반 커뮤니티 게시판 기능 명세

## Clarifications

### Session 2026-01-25

- Q: 게시판(Board)을 데이터베이스 엔티티로 관리할지, 애플리케이션 설정으로 관리할지? → A: DB Entity - 데이터베이스 테이블로 관리하여 런타임에 동적 추가 가능
- Q: 익명 게시글/댓글의 실제 작성자를 관리자가 조회할 수 있어야 하는가? → A: 관리자 조회 가능 - OPERATOR 이상은 익명 게시글의 실제 작성자 조회 가능
- Q: 게시판 내 검색 기능 구현 방식은? → A: DB LIKE 검색 - 제목/내용에 대한 단순 LIKE 쿼리 사용
- Q: 새 게시판 추가 시 권한(BoardPermission) 관리 방식은? → A: 게시판별 개별 설정 - 각 게시판마다 역할별 읽기/쓰기 권한을 개별 지정 가능
- Q: 게시판 API에 대한 요청 제한(Rate Limiting) 정책은? → A: IP 기반 Rate Limit - IP당 분당 요청 수 제한 적용
- Q: 게시글(Post) 콘텐츠 형식은 어떻게 지원해야 하나요? → A: Markdown - 마크다운 형식 지원 (렌더링 시 sanitize)
- Q: 게시글/댓글 삭제 시 처리 방식은? → A: Soft Delete - 삭제 플래그만 설정하고 DB에 데이터 유지 (복구 가능)
- Q: 게시글에 파일 첨부 기능을 지원해야 하나요? → A: 다중 파일 허용 - 이미지 및 문서 파일 첨부 가능 (최대 10개, 각 10MB)
- Q: 게시글 제목과 본문의 최대 길이 제한은? → A: 표준 제한 - 제목 100자, 본문 10,000자
- Q: 익명 게시글 작성자가 본인 글을 수정/삭제할 때 소유권 검증 방식은? → A: 세션 기반 - 서버에 실제 작성자 ID 저장, 로그인 사용자와 매칭하여 검증

### Session 2026-01-26

- Q: Rate limiting의 구체적인 제한 값은? → A: 분당 60회 - IP당 분당 60회 요청 제한 적용
- Q: 첨부파일(Attachment) 저장 방식은? → A: AWS S3 - 확장성과 내구성을 위해 AWS S3에 저장

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 게시판 목록 조회 (Priority: P1)

정회원이 동아리 커뮤니티에 접근하여 게시판 목록을 확인하고 원하는 게시판을 선택하여 글을 읽는다.

**Why this priority**: 게시판 접근은 커뮤니티 기능의 가장 기본적인 진입점으로, 모든 다른 기능(글 작성, 댓글 등)의 전제 조건이다.

**Independent Test**: 로그인한 회원이 게시판 목록을 조회하고 각 게시판에 접근하여 글 목록을 확인할 수 있으면 테스트 통과

**Acceptance Scenarios**:

1. **Given** 정회원으로 로그인한 상태에서, **When** 커뮤니티 메뉴에 접근하면, **Then** 공지사항, 자유게시판, 정보공유 게시판 목록이 표시된다
2. **Given** 정회원으로 로그인한 상태에서, **When** 자유게시판을 선택하면, **Then** 해당 게시판의 게시글 목록이 최신순으로 표시된다
3. **Given** 준회원으로 로그인한 상태에서, **When** 자유게시판에 접근하면, **Then** "정회원 승인 후 이용 가능합니다" 메시지가 표시된다

---

### User Story 2 - 게시판 권한 관리 (Priority: P1)

시스템이 회원 등급에 따라 게시판별 읽기/쓰기 권한을 자동으로 관리한다.

**Why this priority**: 권한 관리는 보안 및 커뮤니티 운영의 핵심으로, 잘못된 권한 설정은 심각한 문제를 야기할 수 있다.

**Independent Test**: 각 회원 등급별로 게시판 접근 시 정의된 권한이 올바르게 적용되는지 확인

**Acceptance Scenarios**:

1. **Given** 준회원이 공지사항에 접근할 때, **When** 글 목록을 요청하면, **Then** "준회원 공개" 설정된 글만 표시된다
2. **Given** 준회원이 정보공유 게시판에 접근할 때, **When** 접근 요청하면, **Then** 접근이 거부되고 안내 메시지가 표시된다
3. **Given** OPERATOR가 공지사항에 접근할 때, **When** 글 작성 버튼을 클릭하면, **Then** 글 작성 화면이 표시된다
4. **Given** 정회원이 공지사항에서, **When** 글 작성 버튼을 찾으면, **Then** 버튼이 표시되지 않거나 비활성화 상태이다

---

### User Story 3 - 공지사항 준회원 공개 설정 (Priority: P2)

운영자가 공지사항 작성 시 준회원에게 공개 여부를 선택하여 중요 공지를 준회원에게도 전달한다.

**Why this priority**: 준회원도 동아리 주요 공지를 확인할 수 있어야 원활한 가입 프로세스가 가능하다.

**Independent Test**: 운영자가 준회원 공개 옵션을 선택한 공지사항이 준회원에게 표시되는지 확인

**Acceptance Scenarios**:

1. **Given** OPERATOR가 공지사항 작성 화면에서, **When** "준회원에게 공개" 옵션을 선택하고 저장하면, **Then** 해당 공지는 준회원에게도 표시된다
2. **Given** 준회원 공개로 설정되지 않은 공지사항이 있을 때, **When** 준회원이 공지사항을 조회하면, **Then** 해당 공지는 목록에 표시되지 않는다

---

### Edge Cases

- 게시판 접근 중 회원 등급이 변경되면 어떻게 되는가? → 다음 요청부터 새로운 권한이 적용된다
- 존재하지 않는 게시판 코드로 접근 시 어떻게 되는가? → 404 에러 페이지 표시
- 게시판 목록이 비어있을 때 어떻게 표시되는가? → "게시글이 없습니다" 안내 메시지 표시
- 삭제된 게시글/댓글은 어떻게 표시되는가? → 목록에서 제외되며, 직접 접근 시 "삭제된 게시글입니다" 안내 표시
- 익명 게시글 수정/삭제 시 다른 사용자가 시도하면 어떻게 되는가? → 403 Forbidden 응답, "수정/삭제 권한이 없습니다" 메시지 표시

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 공지사항(notices), 자유게시판(general), 정보공유(insight) 3개의 게시판을 제공해야 한다
- **FR-002**: 시스템은 각 게시판별로 읽기 권한과 작성 권한을 분리하여 관리해야 한다
- **FR-003**: 공지사항은 OPERATOR 이상만 작성 가능하고, 준회원은 공개 설정된 글만 읽을 수 있어야 한다
- **FR-004**: 자유게시판과 정보공유는 MEMBER 이상만 접근 및 작성 가능해야 한다
- **FR-005**: 자유게시판만 익명 작성 옵션을 제공해야 한다
- **FR-006**: 자유게시판만 "질문" 태그 기능을 제공해야 한다
- **FR-007**: 게시판 목록 조회 시 페이지네이션(기본 20개)을 지원해야 한다
- **FR-008**: 게시판 목록은 최신순 정렬이 기본값이어야 한다
- **FR-009**: 게시판 내 검색 기능을 제공해야 한다 (제목/내용 대상 DB LIKE 검색)
- **FR-010**: 권한이 없는 사용자가 접근 시 적절한 안내 메시지를 표시해야 한다
- **FR-011**: OPERATOR 이상은 익명 게시글/댓글의 실제 작성자를 조회할 수 있어야 한다 (모더레이션 목적)
- **FR-012**: 게시글 본문은 Markdown 형식을 지원하며, 렌더링 시 XSS 방지를 위해 sanitize 처리해야 한다
- **FR-013**: 게시글/댓글 삭제 시 Soft Delete 방식을 적용하여 DB에 데이터를 유지하고 복구 가능하도록 해야 한다
- **FR-014**: 게시글에 파일 첨부 기능을 제공해야 한다 (이미지 및 문서 파일, 최대 10개, 각 10MB 제한)
- **FR-015**: 게시글 제목은 최대 100자, 본문은 최대 10,000자로 제한해야 한다
- **FR-016**: 익명 게시글의 수정/삭제는 서버에 저장된 실제 작성자 ID와 현재 로그인 사용자를 매칭하여 소유권을 검증해야 한다

### Key Entities

- **Board** *(DB Entity)*: 게시판 유형 (notices, general, insight), 각 게시판별 읽기/쓰기 권한 규칙, 익명 허용 여부, 질문 태그 허용 여부. 데이터베이스 테이블로 관리되어 런타임에 동적 추가 가능.
- **BoardPermission** *(DB Entity)*: 회원 등급(Role)과 게시판별 허용 동작(읽기/쓰기) 매핑. 각 게시판마다 역할별 권한을 개별 지정 가능.
- **Attachment** *(DB Entity)*: 게시글 첨부파일. 파일명, S3 저장 경로, MIME 타입, 파일 크기, 업로드 일시. 게시글당 최대 10개, 파일당 최대 10MB. AWS S3에 저장.

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 사용자가 게시판 목록을 3초 이내에 확인할 수 있다
- **SC-002**: 권한이 없는 사용자의 부적절한 접근이 100% 차단된다
- **SC-003**: 준회원이 공지사항의 준회원 공개 글을 정상적으로 조회할 수 있다
- **SC-004**: 게시판 접근 시 올바른 권한이 적용되어 사용자 혼란이 발생하지 않는다

### Non-Functional Requirements

- **NFR-001**: 게시판 API는 IP당 분당 60회 요청 제한(Rate Limiting)을 적용해야 한다
