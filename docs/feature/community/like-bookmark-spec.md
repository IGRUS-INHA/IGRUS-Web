# Feature Specification: 좋아요 / 북마크 (Like / Bookmark)

**Feature Branch**: `001-community-board`
**Created**: 2026-01-25
**Status**: Draft
**Input**: PRD V2 기반 게시글 좋아요 및 북마크 기능 명세

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 게시글 좋아요 (Priority: P2)

정회원이 마음에 드는 게시글에 좋아요를 눌러 관심을 표현한다.

**Why this priority**: 좋아요는 커뮤니티 상호작용의 기본 기능이지만, 게시글/댓글 작성보다 부가적인 기능이다.

**Independent Test**: 게시글에 좋아요를 누르고 좋아요 수가 증가하는지 확인

**Acceptance Scenarios**:

1. **Given** 정회원이 게시글 상세 페이지에서, **When** 좋아요 버튼을 클릭하면, **Then** 좋아요가 추가되고 좋아요 수가 1 증가한다
2. **Given** 이미 좋아요한 게시글에서, **When** 좋아요 버튼을 다시 클릭하면, **Then** 좋아요가 취소되고 좋아요 수가 1 감소한다
3. **Given** 본인이 작성한 게시글에서, **When** 좋아요 버튼을 클릭하면, **Then** 본인 게시글에도 좋아요가 가능하다
4. **Given** 좋아요 상태인 게시글에서, **When** 상세 페이지를 조회하면, **Then** 좋아요 버튼이 활성화 상태로 표시된다

---

### User Story 2 - 게시글 북마크 (Priority: P2)

정회원이 나중에 다시 보고 싶은 게시글을 북마크하여 저장한다.

**Why this priority**: 북마크는 개인화 기능으로 유용하지만, 핵심 커뮤니티 기능보다 부가적이다.

**Independent Test**: 게시글을 북마크하고 마이페이지 북마크 목록에서 확인

**Acceptance Scenarios**:

1. **Given** 정회원이 게시글 상세 페이지에서, **When** 북마크 버튼을 클릭하면, **Then** 북마크가 추가되고 버튼이 활성화 상태로 변경된다
2. **Given** 이미 북마크한 게시글에서, **When** 북마크 버튼을 다시 클릭하면, **Then** 북마크가 취소되고 버튼이 비활성화 상태로 변경된다
3. **Given** 북마크한 게시글이 있는 상태에서, **When** 마이페이지의 북마크 목록에 접근하면, **Then** 북마크한 게시글 목록이 표시된다
4. **Given** 북마크한 게시글이 삭제되었을 때, **When** 북마크 목록을 조회하면, **Then** 해당 게시글은 "삭제된 게시글"로 표시되거나 목록에서 제외된다

---

### User Story 3 - 마이페이지 좋아요 목록 (Priority: P3)

사용자가 본인이 좋아요한 게시글 목록을 마이페이지에서 확인한다.

**Why this priority**: 좋아요 목록 조회는 편의 기능으로 핵심 기능 이후에 구현 가능하다.

**Independent Test**: 마이페이지에서 좋아요한 게시글 목록이 표시되는지 확인

**Acceptance Scenarios**:

1. **Given** 좋아요한 게시글이 있는 상태에서, **When** 마이페이지의 좋아요 목록에 접근하면, **Then** 좋아요한 게시글 목록이 최신순으로 표시된다
2. **Given** 좋아요한 게시글이 삭제되었을 때, **When** 좋아요 목록을 조회하면, **Then** 해당 게시글은 "삭제된 게시글"로 표시되거나 목록에서 제외된다

---

### Edge Cases

- 동시에 여러 사용자가 같은 게시글에 좋아요를 누르면 어떻게 되는가? → 각각 정상 처리되고 좋아요 수는 정확히 반영됨
- 게시글이 삭제된 상태에서 좋아요/북마크를 시도하면 어떻게 되는가? → 동작 거부, "삭제된 게시글입니다" 메시지 표시
- 북마크한 게시글의 게시판 접근 권한이 사라지면 어떻게 되는가? → 북마크 목록에는 표시되나 접근 시 권한 없음 메시지 표시

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 게시글당 1인 1회의 좋아요만 허용해야 한다
- **FR-002**: 좋아요는 토글 방식으로 동작해야 한다 (좋아요 → 취소 → 좋아요 반복 가능)
- **FR-003**: 본인이 작성한 게시글에도 좋아요가 가능해야 한다
- **FR-004**: 시스템은 게시글당 1인 1회의 북마크만 허용해야 한다
- **FR-005**: 북마크는 토글 방식으로 동작해야 한다
- **FR-006**: 북마크한 게시글 목록은 마이페이지에서 조회 가능해야 한다
- **FR-007**: 좋아요한 게시글 목록은 마이페이지에서 조회 가능해야 한다
- **FR-008**: 삭제된 게시글에는 좋아요/북마크를 추가할 수 없어야 한다
- **FR-009**: 게시글 상세 조회 시 현재 사용자의 좋아요/북마크 상태가 포함되어야 한다
- **FR-010**: 게시글 목록 및 상세에서 좋아요 수가 표시되어야 한다
- **FR-011**: 좋아요한 사용자 목록은 비공개이며, 좋아요 수만 공개되어야 한다
- **FR-012**: 북마크 정보는 본인만 조회 가능해야 한다
- **FR-013**: 좋아요/북마크 API는 사용자당 분당 30회로 제한되어야 한다
- **FR-014**: 비회원/준회원에게도 좋아요/북마크 버튼이 표시되어야 하며, 클릭 시 권한 안내 메시지가 표시되어야 한다

### Key Entities

- **Like**: 좋아요 정보 - 게시글 참조, 사용자 참조, 생성일
- **Bookmark**: 북마크 정보 - 게시글 참조, 사용자 참조, 생성일
- **Post (확장)**: like_count 컬럼 추가 - 좋아요 토글 시 증감 업데이트

## Clarifications

### Session 2026-01-25

- Q: 좋아요 정보의 공개 범위를 어떻게 설정할까요? → A: 좋아요 수만 공개, 좋아요한 사용자 목록 비공개 (북마크는 본인만 조회 가능)
- Q: 좋아요/북마크 API에 대한 Rate Limiting 전략은? → A: 사용자당 분당 30회 제한
- Q: 좋아요/북마크 취소 시 데이터 삭제 전략은? → A: Hard delete (취소 시 레코드 완전 삭제)
- Q: 비회원/준회원의 좋아요/북마크 버튼 동작은? → A: 버튼 표시 + 클릭 시 "로그인/정회원 승인이 필요합니다" 안내
- Q: 좋아요 수 카운팅 전략은? → A: 게시글 테이블에 like_count 컬럼 유지 (좋아요 토글 시 증감)

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 좋아요/북마크 토글이 1초 이내에 UI에 반영된다
- **SC-002**: 중복 좋아요/북마크가 100% 방지된다 (1인 1회 제한)
- **SC-003**: 좋아요 수가 실시간으로 정확하게 반영된다
- **SC-004**: 마이페이지 북마크/좋아요 목록이 3초 이내에 로드된다
- **SC-005**: 사용자가 좋아요와 북마크 기능의 차이를 명확히 이해할 수 있다
