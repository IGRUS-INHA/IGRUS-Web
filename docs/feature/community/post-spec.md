# Feature Specification: 게시글 (Post)

**Feature Branch**: `001-community-board`
**Created**: 2026-01-25
**Status**: Draft
**Input**: PRD V2 기반 게시글 작성/조회/수정/삭제 기능 명세

## Clarifications

### Session 2026-01-25

- Q: 이미지 저장소 선택 - 게시글 첨부 이미지는 어디에 저장되어야 하나요? → A: 외부 클라우드 스토리지 (AWS S3, MinIO 등)
- Q: 익명 게시글 작성자 정보 보호 - 익명 게시글의 실제 작성자 정보는 DB에서 어떻게 처리되어야 하나요? → A: 작성자 ID를 저장하되 API 응답에서 필터링 (관리자만 조회 가능)
- Q: 게시글 작성 제한 - 사용자의 게시글 작성 빈도에 제한을 두어야 하나요? → A: 시간당 20회 제한
- Q: 게시글 검색 범위 - 검색 대상 필드는 무엇인가요? → A: 제목 + 내용 검색

## User Scenarios & Testing *(mandatory)*

### User Story 1 - 게시글 작성 (Priority: P1)

정회원이 게시판에서 제목, 내용, 이미지를 포함한 게시글을 작성하고 등록한다.

**Why this priority**: 게시글 작성은 커뮤니티 콘텐츠 생산의 핵심 기능으로, 이 기능 없이는 커뮤니티가 운영될 수 없다.

**Independent Test**: 정회원이 자유게시판에서 글을 작성하고 목록에서 확인할 수 있으면 테스트 통과

**Acceptance Scenarios**:

1. **Given** 정회원이 자유게시판 작성 화면에서, **When** 제목과 내용을 입력하고 저장하면, **Then** 게시글이 등록되고 게시글 상세 화면으로 이동한다
2. **Given** 정회원이 자유게시판에서 글 작성 시, **When** 익명 옵션을 선택하고 저장하면, **Then** 게시글의 작성자가 "익명"으로 표시된다
3. **Given** 정회원이 글 작성 시, **When** 100자를 초과하는 제목을 입력하면, **Then** 저장이 거부되고 "제목은 100자 이내여야 합니다" 메시지가 표시된다
4. **Given** 정회원이 글 작성 시, **When** 5개를 초과하는 이미지를 첨부하면, **Then** "이미지는 최대 5개까지 첨부 가능합니다" 메시지가 표시된다
5. **Given** 정회원이 자유게시판에서, **When** "질문으로 등록" 옵션을 선택하고 저장하면, **Then** 게시글에 질문 태그가 표시된다

---

### User Story 2 - 게시글 조회 (Priority: P1)

사용자가 게시글 목록에서 원하는 글을 선택하여 상세 내용을 확인한다.

**Why this priority**: 게시글 조회는 커뮤니티의 기본 소비 기능으로, 작성된 콘텐츠를 확인할 수 있어야 한다.

**Independent Test**: 게시판 목록에서 게시글을 선택하여 제목, 내용, 작성자, 조회수, 댓글 수 등을 확인할 수 있으면 테스트 통과

**Acceptance Scenarios**:

1. **Given** 게시글 목록에서, **When** 특정 게시글을 선택하면, **Then** 제목, 내용, 작성자, 작성일, 조회수, 좋아요 수, 댓글 수가 표시된다
2. **Given** 게시글 상세 페이지 접근 시, **When** 페이지가 로드되면, **Then** 조회수가 1 증가한다
3. **Given** 익명으로 작성된 게시글에서, **When** 상세 페이지를 조회하면, **Then** 작성자가 "익명"으로 표시되고 작성자 ID가 노출되지 않는다
4. **Given** 삭제된 게시글에 접근할 때, **When** 상세 페이지를 요청하면, **Then** "삭제된 게시글입니다" 메시지가 표시된다

---

### User Story 3 - 게시글 수정 (Priority: P2)

게시글 작성자가 본인이 작성한 글의 제목이나 내용을 수정한다.

**Why this priority**: 오타 수정이나 내용 보완을 위해 필요하지만, 작성/조회보다 사용 빈도가 낮다.

**Independent Test**: 작성자 본인이 게시글을 수정하고 변경된 내용이 반영되는지 확인

**Acceptance Scenarios**:

1. **Given** 본인이 작성한 게시글 상세 페이지에서, **When** 수정 버튼을 클릭하면, **Then** 수정 화면이 표시된다
2. **Given** 게시글 수정 화면에서, **When** 제목과 내용을 변경하고 저장하면, **Then** 변경된 내용이 반영되고 수정일이 업데이트된다
3. **Given** 익명으로 작성한 게시글에서, **When** 수정 화면에 진입하면, **Then** 익명 설정은 변경 불가능하다
4. **Given** 타인이 작성한 게시글에서, **When** 수정을 시도하면, **Then** 수정 버튼이 표시되지 않거나 접근이 거부된다

---

### User Story 4 - 게시글 삭제 (Priority: P2)

게시글 작성자가 본인이 작성한 글을 삭제한다.

**Why this priority**: 부적절하거나 불필요한 글을 제거하기 위해 필요하지만, 조회/작성보다 사용 빈도가 낮다.

**Independent Test**: 작성자가 게시글을 삭제하고 목록에서 삭제 처리된 것을 확인

**Acceptance Scenarios**:

1. **Given** 본인이 작성한 게시글에서, **When** 삭제 버튼을 클릭하고 확인하면, **Then** 게시글이 삭제 처리된다
2. **Given** 댓글이 있는 게시글을 삭제할 때, **When** 삭제를 실행하면, **Then** 게시글은 "삭제된 게시글입니다"로 표시되고 댓글은 유지된다
3. **Given** 삭제된 게시글이 목록에 표시될 때, **When** 목록을 조회하면, **Then** 삭제된 글은 목록에서 제외되거나 삭제 표시가 된다
4. **Given** 관리자가 타인의 게시글에 접근할 때, **When** 삭제를 시도하면, **Then** 관리자 권한으로 삭제가 가능하다

---

### User Story 5 - 공지사항 작성 (Priority: P2)

운영자가 공지사항을 작성하고 준회원 공개 여부를 설정한다.

**Why this priority**: 운영 공지는 동아리 운영에 필수적이지만, 일반 게시글보다 작성 빈도가 낮다.

**Independent Test**: OPERATOR가 공지사항을 작성하고 준회원 공개 설정이 정상 동작하는지 확인

**Acceptance Scenarios**:

1. **Given** OPERATOR가 공지사항 작성 화면에서, **When** 제목과 내용을 입력하고 저장하면, **Then** 공지사항이 등록된다
2. **Given** OPERATOR가 공지사항 작성 시, **When** "준회원에게 공개" 옵션을 선택하면, **Then** 준회원도 해당 공지를 조회할 수 있다
3. **Given** 공지사항 작성 화면에서, **When** 익명 옵션을 찾으면, **Then** 익명 옵션이 존재하지 않는다 (공지사항은 익명 불가)

---

### Edge Cases

- 게시글 작성 중 세션 만료 시 어떻게 되는가? → 재로그인 후 임시 저장된 내용 복구 제안 (옵션)
- 10MB를 초과하는 이미지 첨부 시 어떻게 되는가? → 업로드 거부 및 "이미지는 10MB 이하만 가능합니다" 메시지 표시
- 동시에 같은 게시글을 수정할 때 어떻게 되는가? → 마지막 저장이 반영됨 (낙관적 동시성)
- 제목 없이 게시글 저장 시도 시 어떻게 되는가? → 저장 거부 및 "제목을 입력해 주세요" 메시지 표시

## Requirements *(mandatory)*

### Functional Requirements

- **FR-001**: 시스템은 게시글 제목을 최대 100자까지 허용해야 한다
- **FR-002**: 시스템은 게시글 내용에 길이 제한을 두지 않아야 한다
- **FR-003**: 시스템은 게시글당 최대 5개, 각 10MB 이하의 이미지 첨부를 지원해야 한다 (이미지는 외부 클라우드 스토리지에 저장)
- **FR-004**: 자유게시판에서만 익명 작성 옵션을 제공해야 하며, 작성 후에는 변경 불가해야 한다. 익명 게시글도 작성자 ID는 DB에 저장하되 API 응답에서 필터링하여 관리자만 조회 가능해야 한다
- **FR-005**: 자유게시판에서만 "질문으로 등록" 옵션을 제공해야 한다
- **FR-006**: 공지사항에서만 "준회원에게 공개" 옵션을 제공하고 기본값은 비공개여야 한다
- **FR-007**: 본인이 작성한 게시글만 수정/삭제 가능해야 한다 (관리자 예외)
- **FR-008**: 게시글 삭제 시 Soft Delete를 적용하여 데이터를 보존해야 한다
- **FR-009**: 삭제된 게시글은 UI에 "삭제된 게시글입니다"로 표시해야 한다
- **FR-010**: 삭제된 게시글의 댓글은 유지되어야 한다
- **FR-011**: 게시글 조회 시 조회수가 자동으로 1 증가해야 한다
- **FR-012**: 게시글 목록에서 검색(제목+내용), 정렬(최신순), 필터(질문만) 기능을 제공해야 한다
- **FR-013**: 시스템은 사용자당 시간당 20회의 게시글 작성 제한을 적용해야 한다 (스팸/어뷰징 방지)

### Key Entities

- **Post**: 게시글 정보 - 게시판 유형, 제목, 내용, 작성자, 익명 여부, 질문 태그 여부, 준회원 공개 여부, 조회수, 삭제 여부, 작성/수정일
- **PostImage**: 게시글 첨부 이미지 - 게시글 참조, 이미지 URL, 순서

## Success Criteria *(mandatory)*

### Measurable Outcomes

- **SC-001**: 게시글 작성이 1분 이내에 완료된다 (작성 화면 진입부터 게시 완료까지)
- **SC-002**: 게시글 목록이 3초 이내에 표시된다
- **SC-003**: 이미지가 포함된 게시글 상세 페이지가 5초 이내에 로드된다
- **SC-004**: 익명 게시글의 작성자 정보가 외부에 노출되지 않는다
- **SC-005**: 사용자가 95% 이상의 확률로 첫 번째 시도에 게시글 작성을 완료한다
