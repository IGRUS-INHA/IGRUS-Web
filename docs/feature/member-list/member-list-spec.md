# Feature Specification: 학기별 회원 명단 아카이빙

**Created**: 2026-01-25
**Status**: Draft
**Input**: 유저 테이블과 별개로 학기별 동아리 회원 명단을 아카이빙

---

## 개요

동아리 운영의 연속성과 이력 관리를 위해 학기별로 회원 명단의 스냅샷을 생성하고 보관하는 기능이다. 현재 유저 테이블의 데이터와는 별개로 관리되어, 회원의 탈퇴/정보 변경과 관계없이 해당 학기의 회원 현황을 영구적으로 조회할 수 있다.

관리자가 개별 회원을 체크하여 명단에 포함/제외하는 방식으로 운영되며, 삭제 시에는 Soft Delete를 적용하여 데이터 복구가 가능하다.

---

## User Scenarios & Testing

### User Story 1 - 학기 아카이브 생성 (Priority: P1)

관리자가 새로운 학기 아카이브를 생성한다.

**Why this priority**: 아카이빙의 시작점으로, 이 기능 없이는 학기별 회원 이력을 보관할 수 없다.

**Independent Test**: 관리자가 새 학기 아카이브를 생성하고, 빈 아카이브가 정상적으로 생성되는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 관리자(ADMIN)가 회원 명단 아카이브 메뉴에 접속한 상태에서, **When** 새 학기 아카이브 생성을 선택하면, **Then** 학기 입력 화면(예: 2026년 1학기)이 표시된다
2. **Given** 관리자가 학기를 입력한 상태에서, **When** 생성을 실행하면, **Then** 해당 학기의 빈 아카이브가 생성된다
3. **Given** 이미 해당 학기의 아카이브가 존재하는 상태에서, **When** 같은 학기의 아카이브 생성을 시도하면, **Then** "해당 학기의 아카이브가 이미 존재합니다" 메시지가 표시된다

---

### User Story 2 - 아카이브에 회원 추가 (Priority: P1)

관리자가 특정 학기 아카이브에 회원을 개별 또는 일괄 추가한다.

**Why this priority**: 아카이브에 회원을 등록하는 핵심 기능이다.

**Independent Test**: 관리자가 현재 회원 목록에서 특정 회원들을 선택하여 아카이브에 추가하고, 추가된 회원 정보가 정확히 저장되는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 관리자가 특정 학기 아카이브를 선택한 상태에서, **When** 회원 추가를 선택하면, **Then** 현재 정회원(MEMBER) 이상의 회원 목록이 체크박스와 함께 표시된다
2. **Given** 관리자가 회원 목록에서 특정 회원들을 체크한 상태에서, **When** 추가를 실행하면, **Then** 선택된 회원들의 정보가 해당 학기 아카이브에 저장된다
3. **Given** 이미 아카이브에 포함된 회원을 다시 추가하려고 할 때, **When** 해당 회원이 목록에 표시되면, **Then** "이미 추가됨" 표시와 함께 체크박스가 비활성화된다
4. **Given** 관리자가 전체 선택을 클릭한 상태에서, **When** 추가를 실행하면, **Then** 아직 추가되지 않은 모든 회원이 아카이브에 저장된다

---

### User Story 3 - 아카이브에서 회원 제외 (Priority: P1)

관리자가 특정 학기 아카이브에서 회원을 제외한다.

**Why this priority**: 잘못 추가된 회원을 정리하는 필수 기능이다.

**Independent Test**: 관리자가 아카이브에서 특정 회원을 제외하고, 해당 회원이 더 이상 목록에 표시되지 않는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 관리자가 특정 학기 아카이브의 회원 목록을 조회한 상태에서, **When** 특정 회원들을 선택하고 제외를 실행하면, **Then** 선택된 회원들이 아카이브에서 Soft Delete 처리된다
2. **Given** 제외된 회원이 있는 상태에서, **When** "제외된 회원 보기" 필터를 적용하면, **Then** Soft Delete된 회원 목록이 표시된다
3. **Given** 제외된 회원 목록에서, **When** 특정 회원을 선택하고 복구를 실행하면, **Then** 해당 회원이 아카이브 목록에 다시 표시된다

---

### User Story 4 - 아카이브 명단 조회 (Priority: P1)

관리자 또는 운영진이 과거 학기의 회원 명단을 조회한다.

**Why this priority**: 아카이빙된 데이터를 활용하기 위한 필수 기능이다.

**Independent Test**: 운영진이 과거 학기를 선택하여 해당 학기 회원 목록과 상세 정보를 조회할 수 있는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 운영진(OPERATOR) 이상 권한의 사용자가 아카이브 조회 메뉴에 접속한 상태에서, **When** 학기 목록을 요청하면, **Then** 아카이브가 존재하는 학기 목록이 최신순으로 표시된다
2. **Given** 사용자가 특정 학기를 선택한 상태에서, **When** 명단 조회를 요청하면, **Then** 해당 학기의 회원 목록(학번, 본명, 학과, 역할)이 표시된다
3. **Given** 사용자가 목록에서 특정 회원을 선택한 상태에서, **When** 상세 정보를 요청하면, **Then** 아카이빙 당시의 회원 상세 정보가 표시된다
4. **Given** 일반 회원(MEMBER)이, **When** 아카이브 조회를 시도하면, **Then** "권한이 없습니다" 메시지가 표시된다

---

### User Story 5 - 아카이브 명단 내보내기 (Priority: P2)

관리자가 특정 학기의 회원 명단을 CSV 파일로 내보낸다.

**Why this priority**: 외부 보고나 문서 작성을 위해 데이터 추출이 필요하다.

**Independent Test**: 관리자가 특정 학기 명단을 CSV 파일로 내보내고, 파일 내용이 조회 데이터와 일치하는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 관리자가 특정 학기 명단을 조회한 상태에서, **When** CSV 내보내기를 선택하면, **Then** 학번, 본명, 학과, 역할이 포함된 CSV 파일이 다운로드된다
2. **Given** 운영진이, **When** 내보내기를 시도하면, **Then** "관리자 권한이 필요합니다" 메시지가 표시된다

---

### User Story 6 - 아카이브 삭제 (Priority: P3)

관리자가 빈 아카이브를 삭제한다.

**Why this priority**: 잘못 생성된 빈 아카이브를 정리하는 관리 기능이다.

**Independent Test**: 관리자가 회원이 없는 빈 아카이브를 삭제하고, 삭제된 아카이브 목록에서 확인 및 복구할 수 있는지 확인한다.

**Acceptance Scenarios**:

1. **Given** 관리자가 회원이 없는 빈 아카이브를 선택한 상태에서, **When** 삭제를 요청하면, **Then** "정말 삭제하시겠습니까?" 확인 메시지가 표시된다
2. **Given** 관리자가 삭제를 확인한 상태에서, **When** 최종 확인을 완료하면, **Then** 해당 학기 아카이브가 Soft Delete 처리되고 활성 목록에서 제외된다
3. **Given** 관리자가 회원이 1명 이상 포함된 아카이브를 선택한 상태에서, **When** 삭제를 요청하면, **Then** "회원이 포함된 아카이브는 삭제할 수 없습니다. 먼저 모든 회원을 제외해주세요." 메시지가 표시된다
4. **Given** 관리자가 "삭제된 아카이브 보기"를 선택한 상태에서, **When** 특정 아카이브를 선택하고 복구를 실행하면, **Then** 해당 아카이브가 활성 목록에 다시 표시된다

---

### Edge Cases

- 회원이 아카이빙 후 탈퇴하더라도 아카이브 데이터는 그대로 유지된다
- 아카이브 추가 시점에 유저가 MEMBER 역할이었다면, 이후 ADMIN으로 승격되어도 아카이브에는 MEMBER로 기록된다
- 학기 형식은 "YYYY년 N학기" (예: 2026년 1학기)로 통일한다
- Soft Delete된 데이터는 관리자만 조회 및 복구할 수 있다
- 동일 회원을 같은 학기 아카이브에 중복 추가할 수 없다
- 아카이브 삭제는 빈 아카이브(회원 0명)만 가능하다

---

## Requirements

### Functional Requirements

**아카이브 생성**
- **FR-001**: 시스템은 관리자(ADMIN)에게 학기 아카이브 생성 기능을 제공해야 한다
- **FR-002**: 시스템은 동일 학기의 아카이브 중복 생성을 방지해야 한다
- **FR-003**: 시스템은 아카이브 생성 일시와 생성자 정보를 기록해야 한다

**회원 추가/제외**
- **FR-004**: 시스템은 관리자(ADMIN)에게 아카이브에 회원 추가 기능을 제공해야 한다
- **FR-005**: 시스템은 회원 추가 시 정회원(MEMBER) 이상 역할의 회원만 선택 가능하도록 해야 한다
- **FR-006**: 시스템은 아카이브에 학번, 본명, 학과, 역할, 이메일, 전화번호를 저장해야 한다
- **FR-007**: 시스템은 이미 추가된 회원의 중복 추가를 방지해야 한다
- **FR-008**: 시스템은 관리자(ADMIN)에게 아카이브에서 회원 제외 기능을 제공해야 한다
- **FR-009**: 시스템은 회원 제외 시 Soft Delete를 적용해야 한다
- **FR-010**: 시스템은 제외된 회원의 복구 기능을 제공해야 한다

**아카이브 조회**
- **FR-011**: 시스템은 운영진(OPERATOR) 이상 권한에게 아카이브 조회 기능을 제공해야 한다
- **FR-012**: 시스템은 아카이브된 학기 목록을 최신순으로 정렬하여 제공해야 한다
- **FR-013**: 시스템은 학기별 회원 수를 목록에 함께 표시해야 한다
- **FR-014**: 시스템은 아카이브 상세 조회 시 검색 및 필터링 기능을 제공해야 한다
- **FR-015**: 시스템은 관리자(ADMIN)에게 제외된 회원 목록 조회 기능을 제공해야 한다

**아카이브 내보내기**
- **FR-016**: 시스템은 관리자(ADMIN)에게 CSV 형식의 아카이브 내보내기 기능을 제공해야 한다
- **FR-017**: 시스템은 내보내기 파일에 학기 정보와 생성 일시를 포함해야 한다

**아카이브 삭제**
- **FR-018**: 시스템은 관리자(ADMIN)에게 아카이브 삭제 기능을 제공해야 한다
- **FR-019**: 시스템은 회원이 포함된 아카이브의 삭제를 차단해야 한다 (빈 아카이브만 삭제 가능)
- **FR-020**: 시스템은 아카이브 삭제 시 Soft Delete를 적용해야 한다
- **FR-021**: 시스템은 삭제된 아카이브의 복구 기능을 제공해야 한다
- **FR-022**: 시스템은 삭제/복구 이력(작업자, 일시)을 기록해야 한다

---

### Key Entities

- **SemesterArchive**: 학기 아카이브 메타정보 (학기, 생성일시, 생성자, 회원 수, 삭제 여부)
- **ArchivedMember**: 아카이브된 회원 정보 (학번, 본명, 학과, 역할, 이메일, 전화번호, 추가일시, 삭제 여부)
- **ArchiveAuditLog**: 아카이브 작업 감사 이력 (생성/삭제/복구 기록)

---

## Success Criteria

### Measurable Outcomes

- **SC-001**: 관리자는 회원 추가 작업을 회원당 1초 이내에 완료할 수 있다
- **SC-002**: 운영진은 학기별 명단을 3초 이내에 조회할 수 있다
- **SC-003**: 관리자는 명단을 CSV로 5초 이내에 내보낼 수 있다
- **SC-004**: 아카이브된 데이터는 원본 유저 테이블 변경에 영향받지 않고 100% 보존된다
- **SC-005**: 과거 10년간의 학기별 아카이브를 안정적으로 보관하고 조회할 수 있다
- **SC-006**: Soft Delete된 데이터는 100% 복구 가능하다

---

## Assumptions

- 학기는 1학기(3월~8월)와 2학기(9월~2월)로 구분한다
- 아카이브 대상은 정회원(MEMBER) 이상만 해당된다 (준회원 제외)
- 아카이브된 개인정보는 동아리 운영 목적으로만 사용된다
- 인하대학교 학사일정을 기준으로 학기를 구분한다
- Soft Delete된 데이터는 영구 삭제하지 않는다

---

## Out of Scope

- 회원의 활동 이력(게시글, 출석 등) 아카이빙
- 준회원(ASSOCIATE) 명단 아카이빙
- 아카이브 데이터 수정 기능 (추가/제외만 지원)
- 자동 아카이빙 스케줄링 (수동 생성만 지원)
- 아카이브 데이터 암호화
- Soft Delete 데이터의 영구 삭제 기능
- Excel(.xlsx) 형식 내보내기 (CSV만 지원)
